<Window x:Class="PokerTournamentDirector.Views.MatchDetailsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="{Binding MatchDetailsTitle}"
        Width="800" Height="600"
        Background="#0a192f"
        WindowStartupLocation="CenterOwner">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Classement de la manche"
                   FontSize="24" FontWeight="Bold" Foreground="#00ff88"
                   Margin="0,0,0,20"/>

        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding MatchResults}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  Background="#16213e"
                  RowBackground="#16213e"
                  AlternatingRowBackground="#1a2742"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column"
                  BorderThickness="0">

            <DataGrid.ColumnHeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Background" Value="#0f3460"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                    <Setter Property="Padding" Value="10"/>
                    <Setter Property="HorizontalContentAlignment" Value="Center"/>
                </Style>
            </DataGrid.ColumnHeaderStyle>

            <DataGrid.Columns>
                <DataGridTextColumn Header="Pos" Binding="{Binding Position}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Joueur" Binding="{Binding PlayerName}" Width="2*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="Padding" Value="10,5"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Points base" Binding="{Binding BasePoints}" Width="*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="Foreground" Value="#a0a0a0"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <!-- Coefficient - masqué si tous = 1.0 -->
                <DataGridTextColumn Header="Coef." Binding="{Binding Coefficient, StringFormat=×{0:0.0}}" Width="*">
                    <DataGridTextColumn.Visibility>
                        <Binding Path="DataContext.MatchResults[0].ShowCoefficient" 
                 RelativeSource="{RelativeSource AncestorType=Window}"
                 Converter="{StaticResource BoolToVisibilityConverter}"/>
                    </DataGridTextColumn.Visibility>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Points" Binding="{Binding TotalPoints}" Width="*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="Foreground" Value="#00ff88"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Kills" Binding="{Binding Bounties}" Width="*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Recaves" Binding="{Binding Rebuys}" Width="*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

               <!-- <DataGridTextColumn Header="Gains" Binding="{Binding Winnings, StringFormat=C0}" Width="*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="Foreground" Value="#00ff88"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>-->
            </DataGrid.Columns>
        </DataGrid>
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
            <Button Content="📄 Exporter PDF"
        Command="{Binding DataContext.ExportMatchPdfCommand, RelativeSource={RelativeSource AncestorType=Window}}"
        Width="150" Height="40"
        Margin="10,20,50,0"
                    Padding="10,10,10,10"
        Background="#00ff88"
        Foreground="#0a192f"
        FontWeight="Bold"
        BorderThickness="0"
        Cursor="Hand"/>

            <Button Grid.Row="2"
                Content="❌​ Fermer"
                Command="{Binding CloseMatchDetailsCommand}"
                Width="120" Height="40"
                Margin="0,20,0,0"
                Background="#00ff88"
                Foreground="#0a192f"
                FontWeight="Bold"
                BorderThickness="0"
                Cursor="Hand"
                Click="CloseButton_Click"/>
        </StackPanel>
    </Grid>
</Window>