<Window x:Class="PokerTournamentDirector.Views.ChampionshipConfigView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:PokerTournamentDirector.Converters"
        Title="âš™ï¸ Configuration Championnat" 
        Height="850" Width="1100"
        WindowStartupLocation="CenterScreen"
        Background="#1a1a2e">

    <Window.Resources>
        <local:IntToVisibilityConverter x:Key="IntToVisibilityConverter"/>
        <local:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <local:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter"/>
        <local:IndexGreaterThanZeroToVisibilityConverter x:Key="IndexGreaterThanZeroToVisibilityConverter"/>

        <!-- âœ… Style corrigÃ© pour les ComboBox -->
        <Style TargetType="ComboBox">
            <Setter Property="Background" Value="#0f3460"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#00ff88"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <ToggleButton 
                            Name="ToggleButton" 
                            Grid.Column="2"
                            Focusable="false"
                            IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                            ClickMode="Press"
                            Background="#0f3460"
                            BorderBrush="#00ff88"
                            BorderThickness="2">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="20"/>
                                    </Grid.ColumnDefinitions>
                                    <ContentPresenter 
                                    Name="ContentSite"
                                    IsHitTestVisible="False" 
                                    Content="{TemplateBinding SelectionBoxItem}"
                                    ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                    ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Left">
                                        <ContentPresenter.Resources>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Foreground" Value="White"/>
                                            </Style>
                                        </ContentPresenter.Resources>
                                    </ContentPresenter>
                                    <Path 
                                    Grid.Column="1"
                                    Name="Arrow"
                                    Fill="White"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M 0 0 L 4 4 L 8 0 Z"/>
                                </Grid>
                            </ToggleButton>
                            <Popup 
                            Name="Popup"
                            Placement="Bottom"
                            IsOpen="{TemplateBinding IsDropDownOpen}"
                            AllowsTransparency="True" 
                            Focusable="False"
                            PopupAnimation="Slide">
                                <Grid 
                                Name="DropDown"
                                SnapsToDevicePixels="True"                
                                MinWidth="{TemplateBinding ActualWidth}"
                                MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                    <Border 
                                    x:Name="DropDownBorder"
                                    Background="#0f3460"
                                    BorderThickness="2"
                                    BorderBrush="#00ff88"/>
                                    <ScrollViewer Margin="2" SnapsToDevicePixels="True">
                                        <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                    </ScrollViewer>
                                </Grid>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- âœ… Style pour les items dans la liste dÃ©roulante -->
        <Style TargetType="ComboBoxItem">
            <Setter Property="Background" Value="#0f3460"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBoxItem">
                        <Border 
                        Name="Border"
                        Padding="{TemplateBinding Padding}"
                        Background="{TemplateBinding Background}">
                            <ContentPresenter>
                                <ContentPresenter.Resources>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground" Value="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ComboBoxItem}}"/>
                                    </Style>
                                </ContentPresenter.Resources>
                            </ContentPresenter>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsHighlighted" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#16213e"/>
                                <Setter Property="Foreground" Value="#00ff88"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#16213e"/>
                                <Setter Property="Foreground" Value="#00ff88"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- âœ… Style complet pour les DatePicker -->
        <Style TargetType="DatePicker">
            <Setter Property="Background" Value="#0f3460"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#00ff88"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DatePicker">
                        <Border 
                    Background="#0f3460" 
                    BorderBrush="#00ff88" 
                    BorderThickness="2"
                    CornerRadius="0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <DatePickerTextBox 
                            x:Name="PART_TextBox" 
                            Grid.Column="0"
                            Foreground="White"
                            Background="Transparent"
                            BorderThickness="0"
                            Padding="10"
                            VerticalAlignment="Center"
                            FontSize="14"/>

                                <Button 
                            x:Name="PART_Button" 
                            Grid.Column="1"
                            Foreground="White"
                            Background="Transparent"
                            BorderThickness="0"
                            Width="30"
                            Content="ðŸ“…"
                            FontSize="16"
                            Cursor="Hand"/>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- âœ… Style pour le TextBox interne du DatePicker -->
        <Style TargetType="DatePickerTextBox">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DatePickerTextBox">
                        <Grid>
                            <TextBox 
                        x:Name="PART_TextBox"
                        Text="{Binding Path=Text, RelativeSource={RelativeSource AncestorType={x:Type DatePickerTextBox}}}"
                        Background="Transparent"
                        Foreground="White"
                        BorderThickness="0"
                        Padding="0"
                        VerticalAlignment="Center"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- SIDEBAR -->
        <Border Grid.Column="0" Background="#0f3460" BorderBrush="#16213e" BorderThickness="0,0,1,0">
            <StackPanel Margin="20">
                <TextBlock Text="âš™ï¸ CONFIGURATION" FontSize="16" FontWeight="Bold" Foreground="#00ff88" Margin="0,0,0,30"/>

                <Button Content="1. Informations" Click="Step0_Click" Height="45" Margin="0,5" Background="Transparent" Foreground="White" BorderThickness="0" HorizontalContentAlignment="Left" Padding="10" FontSize="14"/>
                <Button Content="2. SystÃ¨me points" Click="Step1_Click" Height="45" Margin="0,5" Background="Transparent" Foreground="White" BorderThickness="0" HorizontalContentAlignment="Left" Padding="10" FontSize="14"/>
                <Button Content="3. Comptage" Click="Step2_Click" Height="45" Margin="0,5" Background="Transparent" Foreground="White" BorderThickness="0" HorizontalContentAlignment="Left" Padding="10" FontSize="14"/>
                <Button Content="4. Bonus" Click="Step3_Click" Height="45" Margin="0,5" Background="Transparent" Foreground="White" BorderThickness="0" HorizontalContentAlignment="Left" Padding="10" FontSize="14"/>
                <Button Content="5. Recaves" Click="Step4_Click" Height="45" Margin="0,5" Background="Transparent" Foreground="White" BorderThickness="0" HorizontalContentAlignment="Left" Padding="10" FontSize="14"/>
                <Button Content="6. Qualification" Click="Step5_Click" Height="45" Margin="0,5" Background="Transparent" Foreground="White" BorderThickness="0" HorizontalContentAlignment="Left" Padding="10" FontSize="14"/>

                <Border Background="#16213e" CornerRadius="8" Padding="15" Margin="0,40,0,0">
                    <StackPanel>
                        <TextBlock Text="ðŸ“„ Export" FontSize="14" FontWeight="Bold" Foreground="#00ff88" Margin="0,0,0,10"/>
                        <Button Content="RÃ¨glement PDF" Command="{Binding ExportPdfCommand}" Height="40" Background="#1a1a2e" Foreground="White" BorderThickness="0" FontSize="12" Cursor="Hand"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>

        <!-- CONTENU -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Padding="30">
                <Grid>
                <!-- STEP 0 -->
                <StackPanel x:Name="Step0" Visibility="Visible">
                    <TextBlock Text="ðŸ“‹ Informations gÃ©nÃ©rales" FontSize="24" FontWeight="Bold" Foreground="#00ff88" Margin="0,0,0,20"/>

                    <TextBlock Text="Nom du championnat *" Foreground="White" FontSize="14" Margin="0,10,0,5"/>
                    <TextBox Text="{Binding Name}" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>

                    <TextBlock Text="Saison *" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                    <TextBox Text="{Binding Season}" Width="200" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>

                    <TextBlock Text="Description" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                    <TextBox Text="{Binding Description}" Height="80" Padding="10" TextWrapping="Wrap" AcceptsReturn="True" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14" VerticalScrollBarVisibility="Auto"/>

                    <Grid Margin="0,15,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>

                        <StackPanel>
                            <TextBlock Text="Date dÃ©but *" Foreground="White" FontSize="14" Margin="0,0,0,5"/>
                            <DatePicker SelectedDate="{Binding StartDate}" Height="40" FontSize="14"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Date fin *" Foreground="White" FontSize="14" Margin="0,0,0,5"/>
                            <DatePicker SelectedDate="{Binding EndDate}" Height="40" FontSize="14"/>
                        </StackPanel>
                    </Grid>

                    <TextBlock Text="Type de pÃ©riode" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                    <ComboBox ItemsSource="{Binding PeriodTypes}" SelectedIndex="{Binding SelectedPeriodTypeIndex}" Height="40" FontSize="14"/>

                    <CheckBox Content="Activer classement mensuel" IsChecked="{Binding EnableMonthlyStandings}" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                    <CheckBox Content="Activer classement trimestriel" IsChecked="{Binding EnableQuarterlyStandings}" Foreground="White" FontSize="14" Margin="0,5"/>
                </StackPanel>

                    <!-- STEP 1 -->
                    <StackPanel x:Name="Step1" Visibility="Collapsed">
                        <TextBlock Text="ðŸŽ¯ SystÃ¨me de points" FontSize="24" FontWeight="Bold" Foreground="#00ff88" Margin="0,0,0,20"/>

                        <TextBlock Text="Mode de calcul" Foreground="White" FontSize="14" Margin="0,10,0,5"/>
                        <ComboBox ItemsSource="{Binding PointsModes}" SelectedIndex="{Binding SelectedPointsModeIndex}" Height="40" FontSize="14"/>

                        <!-- Mode LinÃ©aire -->
                        <StackPanel Visibility="{Binding SelectedPointsModeIndex, Converter={StaticResource IntToVisibilityConverter}, ConverterParameter=0}">
                            <TextBlock Text="Points 1Ã¨re place" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                            <TextBox Text="{Binding LinearFirstPlacePoints}" Width="150" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>
                            <TextBlock Text="DÃ©gressif : -1 point par position" Foreground="#a0a0a0" FontSize="12" Margin="0,5"/>
                        </StackPanel>

                        <!-- Mode Points fixes -->
                        <StackPanel Visibility="{Binding SelectedPointsModeIndex, Converter={StaticResource IntToVisibilityConverter}, ConverterParameter=1}">
                            <TextBlock Text="Table de points par position" Foreground="White" FontSize="14" Margin="0,15,0,10"/>

                            <!-- Presets -->
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                                <Button Content="ðŸ“Š 100 Points" Click="LoadPreset100_Click" Width="130" Height="35" Background="#16213e" Foreground="White" BorderBrush="#00ff88" BorderThickness="1" Margin="0,0,10,0" Cursor="Hand" FontSize="12"/>
                                <Button Content="ðŸŽ´ AK66" Click="LoadPresetAK66_Click" Width="130" Height="35" Background="#16213e" Foreground="White" BorderBrush="#00ff88" BorderThickness="1" Cursor="Hand" FontSize="12"/>
                            </StackPanel>

                            <!-- Grille d'Ã©dition -->
                            <Border Background="#0f3460" BorderBrush="#00ff88" BorderThickness="2" Padding="15" CornerRadius="5">
                                <StackPanel>
                                    <Grid Margin="0,0,0,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="2*"/>
                                            <ColumnDefinition Width="1.5*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0" Text="Position / Plage" FontWeight="Bold" Foreground="#00ff88" FontSize="12"/>
                                        <TextBlock Grid.Column="1" Text="Points" FontWeight="Bold" Foreground="#00ff88" FontSize="12" Margin="10,0,0,0"/>
                                    </Grid>

                                    <ScrollViewer MaxHeight="300" VerticalScrollBarVisibility="Auto">
                                        <ItemsControl x:Name="FixedPointsItemsControl">
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid Margin="0,5">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="2*"/>
                                                            <ColumnDefinition Width="1.5*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <TextBox Grid.Column="0" 
                                             Text="{Binding Position, UpdateSourceTrigger=PropertyChanged}" 
                                             Background="#1a1a2e" 
                                             Foreground="White" 
                                             BorderBrush="#00ff88" 
                                             BorderThickness="1" 
                                             Padding="8" 
                                             FontSize="13"/>

                                                        <TextBox Grid.Column="1" 
                                             Text="{Binding Points, UpdateSourceTrigger=PropertyChanged}" 
                                             Background="#1a1a2e" 
                                             Foreground="White" 
                                             BorderBrush="#00ff88" 
                                             BorderThickness="1" 
                                             Padding="8" 
                                             Margin="10,0,0,0" 
                                             FontSize="13"/>

                                                        <Button Grid.Column="2" 
                                            Content="ðŸ—‘ï¸" 
                                            Click="RemoveFixedPointRow_Click" 
                                            Tag="{Binding}" 
                                            Width="35" 
                                            Height="35" 
                                            Background="#e94560" 
                                            Foreground="White" 
                                            BorderThickness="0" 
                                            Margin="10,0,0,0" 
                                            Cursor="Hand"
                                            FontSize="14"/>
                                                    </Grid>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </ScrollViewer>

                                    <Button Content="âž• Ajouter une ligne" Click="AddFixedPointRow_Click" HorizontalAlignment="Left" Width="160" Height="35" Background="#00ff88" Foreground="#1a1a2e" FontWeight="Bold" BorderThickness="0" Margin="0,15,0,0" Cursor="Hand"/>
                                </StackPanel>
                            </Border>

                            <!-- Info -->
                            <Border Background="#16213e" Padding="12" Margin="0,10,0,0" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="ðŸ’¡ Exemples : '1', '2', '6-10', '11-20', '21+'" FontSize="11" Foreground="#a0a0a0"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <CheckBox Content="Points de participation" IsChecked="{Binding EnableParticipationPoints}" Foreground="White" FontSize="14" Margin="0,20,0,5"/>
                        <StackPanel Visibility="{Binding EnableParticipationPoints, Converter={StaticResource BoolToVisibilityConverter}}">
                            <TextBox Text="{Binding ParticipationPoints}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14" Margin="0,10,0,0"/>
                        </StackPanel>

                        <TextBlock Text="DÃ©partage Ã©galitÃ©" Foreground="White" FontSize="14" Margin="0,20,0,5"/>
                        <ComboBox ItemsSource="{Binding TiebreakerOptions}" SelectedIndex="{Binding Tiebreaker1Index}" Height="40" FontSize="14"/>
                    </StackPanel>

                    <!-- STEP 2 -->
                    <StackPanel x:Name="Step2" Visibility="Collapsed">
                        <TextBlock Text="ðŸ“Š Comptage sÃ©lectif" FontSize="24" FontWeight="Bold" Foreground="#00ff88" Margin="0,0,0,20"/>

                        <TextBlock Text="Mode de comptage" Foreground="White" FontSize="14" Margin="0,10,0,5"/>
                        <ComboBox ItemsSource="{Binding CountingModes}" SelectedIndex="{Binding SelectedCountingModeIndex}" Height="40" FontSize="14"/>

                        <!-- Meilleurs X de la saison -->
                        <StackPanel Visibility="{Binding SelectedCountingModeIndex, Converter={StaticResource IntToVisibilityConverter}, ConverterParameter=1}">
                            <TextBlock Text="Meilleurs X rÃ©sultats sur toute la saison" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                            <TextBox Text="{Binding BestXOfSeason}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>
                            <TextBlock Text="Ex: Si vous indiquez 10, seuls les 10 meilleurs rÃ©sultats compteront" Foreground="#a0a0a0" FontSize="11" Margin="0,5"/>
                        </StackPanel>

                        <!-- Meilleurs X par pÃ©riode -->
                        <StackPanel Visibility="{Binding SelectedCountingModeIndex, Converter={StaticResource IntToVisibilityConverter}, ConverterParameter=2}">
                            <TextBlock Text="PÃ©riode de rÃ©fÃ©rence" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                            <ComboBox SelectedIndex="{Binding BestXPeriodTypeIndex}" Height="40" FontSize="14" Margin="0,5">
                                <ComboBoxItem Content="Par mois"/>
                                <ComboBoxItem Content="Par trimestre"/>
                                <ComboBoxItem Content="Par annÃ©e"/>
                            </ComboBox>

                            <TextBlock Text="Nombre de meilleurs rÃ©sultats Ã  garder par pÃ©riode" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                            <TextBox Text="{Binding BestXPerPeriod}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>
                            <TextBlock Text="Ex: 3 meilleurs rÃ©sultats par mois" Foreground="#a0a0a0" FontSize="11" Margin="0,5"/>
                        </StackPanel>

                        <!-- Option commune : retirer les pires -->
                        <Border Background="#16213e" Padding="15" Margin="0,25,0,0" CornerRadius="5">
                            <StackPanel>
                                <TextBlock Text="Option supplÃ©mentaire" FontSize="14" FontWeight="Bold" Foreground="#00ff88" Margin="0,0,0,10"/>
                                <TextBlock Text="Retirer les X pires rÃ©sultats" Foreground="White" FontSize="14" Margin="0,5,0,5"/>
                                <TextBox Text="{Binding ExcludeWorstX}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>
                                <TextBlock Text="0 = aucun retrait â€¢ Cette option s'applique aprÃ¨s le comptage principal" Foreground="#a0a0a0" FontSize="11" Margin="0,5"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- STEP 3 -->
                <StackPanel x:Name="Step3" Visibility="Collapsed">
                    <TextBlock Text="ðŸŽ Bonus et primes" FontSize="24" FontWeight="Bold" Foreground="#00ff88" Margin="0,0,0,20"/>

                    <CheckBox Content="Compter les bounties" IsChecked="{Binding CountBounties}" Foreground="White" FontSize="14" Margin="0,10,0,5"/>
                    <StackPanel Visibility="{Binding CountBounties, Converter={StaticResource BoolToVisibilityConverter}}">
                        <TextBlock Text="Points par bounty" Foreground="White" FontSize="14" Margin="0,10,0,5"/>
                        <TextBox Text="{Binding PointsPerBounty}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>
                    </StackPanel>

                    <TextBlock Text="Bonus spÃ©ciaux" Foreground="White" FontSize="16" Margin="0,25,0,10"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="150"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Text="Victoire" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                        <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding VictoryBonus}" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" Margin="0,5"/>

                        <TextBlock Grid.Row="1" Text="Top 3" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                        <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Top3Bonus}" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" Margin="0,5"/>

                        <TextBlock Grid.Row="2" Text="1er Ã©liminÃ© (consolation)" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                        <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding FirstEliminatedConsolation}" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" Margin="0,5"/>
                    </Grid>

                    <TextBlock Text="PondÃ©ration manches" Foreground="White" FontSize="16" Margin="0,25,0,10"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="150"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Text="Coeff. standard" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                        <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding DefaultMatchCoefficient}" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" Margin="0,5"/>

                        <TextBlock Grid.Row="1" Text="Coeff. finale" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                        <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding FinalMatchCoefficient}" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" Margin="0,5"/>

                        <TextBlock Grid.Row="2" Text="Coeff. Main Event" Foreground="White" VerticalAlignment="Center" Margin="0,5"/>
                        <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding MainEventCoefficient}" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" Margin="0,5"/>
                    </Grid>
                </StackPanel>

                <!-- STEP 4 -->
                <StackPanel x:Name="Step4" Visibility="Collapsed">
                    <TextBlock Text="ðŸ’° Gestion recaves" FontSize="24" FontWeight="Bold" Foreground="#00ff88" Margin="0,0,0,20"/>

                    <TextBlock Text="Mode de recave" Foreground="White" FontSize="14" Margin="0,10,0,5"/>
                    <ComboBox ItemsSource="{Binding RebuyModes}" SelectedIndex="{Binding SelectedRebuyModeIndex}" Height="40" FontSize="14"/>

                    <StackPanel Visibility="{Binding SelectedRebuyModeIndex, Converter={StaticResource IndexGreaterThanZeroToVisibilityConverter}}">
                        <TextBlock Text="Limite" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                        <TextBox Text="{Binding RebuyLimit}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>

                        <TextBlock Text="PÃ©nalitÃ© points" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                        <TextBox Text="{Binding RebuyPointsPenalty}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>

                        <TextBlock Text="Multiplicateur points" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                        <TextBox Text="{Binding RebuyPointsMultiplier}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>
                        <TextBlock Text="1.0 = normal, 0.5 = rÃ©duit de moitiÃ©" Foreground="#a0a0a0" FontSize="11" Margin="0,5"/>
                    </StackPanel>
                </StackPanel>

                <!-- STEP 5 -->
                <StackPanel x:Name="Step5" Visibility="Collapsed">
                    <TextBlock Text="ðŸŽ« Qualification" FontSize="24" FontWeight="Bold" Foreground="#00ff88" Margin="0,0,0,20"/>

                    <CheckBox Content="Championnat ouvert (tous)" IsChecked="{Binding IsOpenChampionship}" Foreground="White" FontSize="14" Margin="0,10,0,5"/>

                    <StackPanel Visibility="{Binding IsOpenChampionship, Converter={StaticResource InverseBoolToVisibilityConverter}}">
                        <TextBlock Text="Top X" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                        <TextBox Text="{Binding QualificationTopX}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>

                        <TextBlock Text="Points min" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                        <TextBox Text="{Binding QualificationMinPoints}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>

                        <TextBlock Text="Manches min" Foreground="White" FontSize="14" Margin="0,15,0,5"/>
                        <TextBox Text="{Binding QualificationMinMatches}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>
                    </StackPanel>

                    <CheckBox Content="Late registration" IsChecked="{Binding AllowLateRegistration}" Foreground="White" FontSize="14" Margin="0,20,0,5"/>
                    <StackPanel Visibility="{Binding AllowLateRegistration, Converter={StaticResource BoolToVisibilityConverter}}">
                        <TextBlock Text="Jusqu'Ã  manche nÂ°" Foreground="White" FontSize="14" Margin="0,10,0,5"/>
                        <TextBox Text="{Binding LateRegistrationUntilMatch}" Width="120" HorizontalAlignment="Left" Height="40" Padding="10" Background="#0f3460" Foreground="White" BorderBrush="#00ff88" BorderThickness="2" FontSize="14"/>
                        <CheckBox Content="Points rÃ©troactifs" IsChecked="{Binding AllowRetroactivePoints}" Foreground="White" FontSize="14" Margin="0,10,0,0"/>
                    </StackPanel>
                </StackPanel>
                </Grid>
            </ScrollViewer>

            <!-- FOOTER -->
            <Border Grid.Row="1" Background="#0f3460" Padding="30,15" BorderBrush="#16213e" BorderThickness="0,1,0,0">
                <Grid>
                    <Button x:Name="BtnPrev" Content="â† PrÃ©cÃ©dent" Click="Previous_Click" HorizontalAlignment="Left" Width="130" Height="42" Background="#2a2a3e" Foreground="White" FontSize="14" BorderThickness="0" Visibility="Collapsed"/>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="Annuler" Click="Cancel_Click" Width="110" Height="42" Background="#e94560" Foreground="White" FontSize="14" BorderThickness="0" Margin="0,0,10,0"/>
                        <Button x:Name="BtnNext" Content="Suivant â†’" Click="Next_Click" Width="130" Height="42" Background="#00ff88" Foreground="#1a1a2e" FontSize="14" FontWeight="Bold" BorderThickness="0" Margin="0,0,10,0"/>
                        <Button x:Name="BtnSave" Content="âœ… Enregistrer" Click="Save_Click" Width="140" Height="42" Background="#00ff88" Foreground="#1a1a2e" FontSize="14" FontWeight="Bold" BorderThickness="0" Visibility="Collapsed"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
