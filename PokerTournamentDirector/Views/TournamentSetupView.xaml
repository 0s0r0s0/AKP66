<Window x:Class="PokerTournamentDirector.Views.TournamentSetupView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Nouveau Tournoi" 
        Height="800" Width="1200"
        Background="#1a1a2e"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style x:Key="StepIndicator" TargetType="Border">
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="CornerRadius" Value="20"/>
            <Setter Property="Background" Value="#0f3460"/>
        </Style>

        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="#16213e"/>
            <Setter Property="CornerRadius" Value="15"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="10"/>
        </Style>

        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#a0a0a0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,10,0,5"/>
        </Style>

        <Style x:Key="InputStyle" TargetType="TextBox">
            <Setter Property="Background" Value="#0f3460"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Height" Value="40"/>
        </Style>

        

        <Style x:Key="PlayerListStyle" TargetType="ListBox">
            <Setter Property="Background" Value="#0f3460"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>

        <Style TargetType="ListBoxItem">
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#00ff88"/>
                    <Setter Property="Foreground" Value="#1a1a2e"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1a2332"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- HEADER avec indicateur d'√©tapes -->
        <Border Grid.Row="0" Background="#0f3460" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" 
                          Text="{Binding StepTitle}" 
                          FontSize="28" 
                          FontWeight="Bold" 
                          Foreground="White"
                          VerticalAlignment="Center"/>

                <!-- Indicateur d'√©tapes -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <!-- √âtape 1 -->
                    <StackPanel Orientation="Horizontal">
                        <Border Width="40" Height="40" CornerRadius="20">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Background" Value="#0f3460"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentStep}" Value="1">
                                            <Setter Property="Background" Value="#00ff88"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="1" FontSize="18" FontWeight="Bold" 
                                      HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground" Value="White"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding CurrentStep}" Value="1">
                                                <Setter Property="Foreground" Value="#1a1a2e"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Border>
                        <TextBlock Text="Config" Foreground="#a0a0a0" VerticalAlignment="Center" Margin="8,0,20,0"/>
                    </StackPanel>

                    <TextBlock Text="‚Üí" Foreground="#a0a0a0" VerticalAlignment="Center" Margin="0,0,20,0" FontSize="20"/>

                    <!-- √âtape 2 -->
                    <StackPanel Orientation="Horizontal">
                        <Border Width="40" Height="40" CornerRadius="20">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Background" Value="#0f3460"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentStep}" Value="2">
                                            <Setter Property="Background" Value="#00ff88"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="2" FontSize="18" FontWeight="Bold" 
                                      HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground" Value="White"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding CurrentStep}" Value="2">
                                                <Setter Property="Foreground" Value="#1a1a2e"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Border>
                        <TextBlock Text="Joueurs" Foreground="#a0a0a0" VerticalAlignment="Center" Margin="8,0,20,0"/>
                    </StackPanel>


                    <TextBlock Text="‚Üí" Foreground="#a0a0a0" VerticalAlignment="Center" Margin="0,0,15,0" FontSize="20"/>

                    <!-- √âtape 3: Tables - NOUVEAU -->
                    <StackPanel Orientation="Horizontal">
                        <Border Width="40" Height="40" CornerRadius="20">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Background" Value="#0f3460"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentStep}" Value="3">
                                            <Setter Property="Background" Value="#00ff88"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="3" FontSize="18" FontWeight="Bold" 
                  HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground" Value="White"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding CurrentStep}" Value="3">
                                                <Setter Property="Foreground" Value="#1a1a2e"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Border>
                        <TextBlock Text="Tables" Foreground="#a0a0a0" VerticalAlignment="Center" Margin="8,0,15,0"/>
                    </StackPanel>

                    <TextBlock Text="‚Üí" Foreground="#a0a0a0" VerticalAlignment="Center" Margin="0,0,15,0" FontSize="20"/>


                    <!-- √âtape 4 -->
                    <StackPanel Orientation="Horizontal">
                        <Border Width="40" Height="40" CornerRadius="20">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Background" Value="#0f3460"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CurrentStep}" Value="4">
                                            <Setter Property="Background" Value="#00ff88"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="4" FontSize="18" FontWeight="Bold" 
                                      HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground" Value="White"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding CurrentStep}" Value="4">
                                                <Setter Property="Foreground" Value="#1a1a2e"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Border>
                        <TextBlock Text="Lancer" Foreground="#a0a0a0" VerticalAlignment="Center" Margin="8,0,0,0"/>
                    </StackPanel>
                </StackPanel>

                <Button Grid.Column="2" Content="‚úï" 
                       Click="CloseWindow_Click"
                       Width="40" Height="40"
                       Background="Transparent"
                       Foreground="White"
                       FontSize="24"
                       HorizontalAlignment="Right"
                       BorderThickness="0"/>
            </Grid>
        </Border>

        <!-- CONTENU PRINCIPAL -->
        <Grid Grid.Row="1" Margin="20">

            <!-- √âTAPE 1 : Configuration - VERSION 2 COLONNES -->
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ScrollViewer.Style>
                        <Style TargetType="ScrollViewer">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding CurrentStep}" Value="1">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ScrollViewer.Style>

                    <Grid Margin="20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="20"/>
                            <ColumnDefinition Width="1.2*"/>
                        </Grid.ColumnDefinitions>

                        <!-- ========== COLONNE GAUCHE : Actions principales ========== -->
                        <StackPanel Grid.Column="0">

                            <!-- 1. TEMPLATE -->
                            <Border Style="{StaticResource CardStyle}">
                                <StackPanel>
                                    <TextBlock Text="üìù Mod√®le de tournoi" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Foreground="White" 
                               Margin="0,0,0,8"/>

                                    <TextBlock Text="D√©marrez rapidement avec un mod√®le pr√©-configur√©" 
                               FontSize="13" 
                               Foreground="#a0a0a0" 
                               Margin="0,0,0,15"/>

                                    <ComboBox ItemsSource="{Binding AvailableTemplates}"
                              SelectedItem="{Binding SelectedTemplate}"
                              Style="{StaticResource ComboBoxStyle}"
                              Height="45"
                              Padding="12"
                              VerticalContentAlignment="Center"
                              FontSize="15"
                              FontWeight="SemiBold">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Name}"
                                           Foreground="White"
                                           FontSize="15"/>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                </StackPanel>
                            </Border>

                        <!-- 2. STRUCTURE DE BLINDS -->
                        <Border Style="{StaticResource CardStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Colonne principale : label + ComboBox -->
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="‚è±Ô∏è Structure de blinds"
                       FontSize="20"
                       FontWeight="Bold"
                       Foreground="White"
                       Margin="0,0,0,15"/>
                                    <ComboBox ItemsSource="{Binding AvailableBlindStructures}"
                      SelectedItem="{Binding SelectedBlindStructure}"
                      DisplayMemberPath="Name"
                      Style="{StaticResource ComboBoxStyle}"
                      Height="45"
                      Padding="12"
                      VerticalContentAlignment="Center"
                      FontSize="15"
                      FontWeight="SemiBold"/>
                                </StackPanel>

                                <!-- Bouton "Voir" discret, toujours visible -->
                                <Button Grid.Column="1"
                Content="Voir"
                Command="{Binding ViewBlindStructureCommand}"
                Height="35"
                Width="60"
                Margin="10,0,0,0"
                VerticalAlignment="Bottom"
                FontSize="12"
                Padding="8,4"
                Background="Transparent"
                Foreground="#00ff88"
                BorderBrush="#00ff88"
                BorderThickness="1"/>
                            </Grid>
                        </Border>

                        <!-- 3. CHAMPIONNAT -->
                            <Border Background="#0f3460" 
                    CornerRadius="15" 
                    Padding="20" 
                    Margin="10">
                                <StackPanel>
                                    <TextBlock Text="üèÜ Championnat (optionnel)" 
                               Foreground="#00ff88" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Margin="0,0,0,15"/>

                                    <CheckBox x:Name="ChkChampionship"
                              Content="Ce tournoi est une manche de championnat"
                              IsChecked="{Binding IsChampionshipMatch}"
                              Foreground="White"
                              FontSize="15"
                              Margin="0,0,0,15"/>

                                    <!-- D√©tails championnat -->
                                    <StackPanel>
                                        <StackPanel.Style>
                                            <Style TargetType="StackPanel">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding ElementName=ChkChampionship, Path=IsChecked}" Value="True">
                                                        <Setter Property="Visibility" Value="Visible"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </StackPanel.Style>

                                        <TextBlock Text="S√©lectionner le championnat :" 
                                   Foreground="White" 
                                   FontSize="14" 
                                   Margin="0,0,0,8"/>

                                        <ComboBox ItemsSource="{Binding AvailableChampionships}"
                                  SelectedItem="{Binding SelectedChampionship}"
                                  Style="{StaticResource ComboBoxStyle}"
                                  Height="45"
                                  Margin="0,0,0,15"
                                  Padding="12"
                                  VerticalContentAlignment="Center"
                                  FontSize="15"
                                  FontWeight="SemiBold">
                                            <ComboBox.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock>
                                        <Run Text="{Binding Name}" FontWeight="Bold"/>
                                        <Run Text=" - " Foreground="#a0a0a0"/>
                                        <Run Text="{Binding Season}" Foreground="#a0a0a0"/>
                                                    </TextBlock>
                                                </DataTemplate>
                                            </ComboBox.ItemTemplate>
                                        </ComboBox>

                                        <!-- Options championnat -->
                                        <StackPanel Orientation="Horizontal">
                                            <CheckBox Content="üèÜ Finale" 
                                      IsChecked="{Binding IsFinalMatch}"
                                      Foreground="White"
                                      FontSize="14"
                                      Margin="0,0,20,0"/>
                                            <CheckBox Content="‚≠ê Main Event" 
                                      IsChecked="{Binding IsMainEvent}"
                                      Foreground="White"
                                      FontSize="14"/>
                                        </StackPanel>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                        </StackPanel>

                        <!-- ========== COLONNE DROITE : Configuration d√©taill√©e ========== -->
                        <StackPanel Grid.Column="2">

                            <!-- Infos g√©n√©rales -->
                            <Border Style="{StaticResource CardStyle}">
                                <StackPanel>
                                    <TextBlock Text="üìã Informations g√©n√©rales" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Foreground="White" 
                               Margin="0,0,0,20"/>

                                    <TextBlock Text="Nom du tournoi" Style="{StaticResource LabelStyle}"/>
                                    <TextBox Text="{Binding TournamentName, UpdateSourceTrigger=PropertyChanged}" 
                             Style="{StaticResource TextBoxStyle}"/>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="15"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0">
                                            <TextBlock Text="Buy-in (‚Ç¨)" Style="{StaticResource LabelStyle}"/>
                                            <TextBox Text="{Binding BuyIn, UpdateSourceTrigger=PropertyChanged}" 
                                     Style="{StaticResource TextBoxStyle}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="2">
                                            <TextBlock Text="Jetons" Style="{StaticResource LabelStyle}"/>
                                            <TextBox Text="{Binding StartingStack, UpdateSourceTrigger=PropertyChanged}" 
                                     Style="{StaticResource TextBoxStyle}"/>
                                        </StackPanel>
                                    </Grid>

                                    <TextBlock Text="Joueurs max" Style="{StaticResource LabelStyle}"/>
                                    <TextBox Text="{Binding MaxPlayers, UpdateSourceTrigger=PropertyChanged}" 
                             Style="{StaticResource TextBoxStyle}"/>
                                </StackPanel>
                            </Border>

                            <!-- Tables -->
                            <Border Style="{StaticResource CardStyle}">
                                <StackPanel>
                                <TextBlock Text="üé≤ Configuration des tables" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Foreground="White" 
                               Margin="0,0,0,20"/>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="15"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0">
                                            <TextBlock Text="Places par table" Style="{StaticResource LabelStyle}"/>
                                            <TextBox Text="{Binding SeatsPerTable, UpdateSourceTrigger=PropertyChanged}" 
                                     Style="{StaticResource TextBoxStyle}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="2">
                                            <TextBlock Text="Enregistrement tardif (niveaux)" Style="{StaticResource LabelStyle}"/>
                                            <TextBox Text="{Binding LateRegLevels, UpdateSourceTrigger=PropertyChanged}" 
                                     Style="{StaticResource TextBoxStyle}"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Recaves -->
                            <Border Style="{StaticResource CardStyle}">
                                <StackPanel>
                                <TextBlock Text="üí∞‚Äã‚Äã Recaves" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Foreground="White" 
                               Margin="0,0,0,15"/>

                                    <CheckBox Content="Autoriser les recaves" 
                              IsChecked="{Binding AllowRebuys}"
                              Foreground="White" 
                              FontSize="15"
                              Margin="0,0,0,15"/>

                                    <StackPanel Visibility="{Binding AllowRebuys, Converter={StaticResource BoolToVisibleConverter}}">

                                        <TextBlock Text="Montant recave (‚Ç¨)" Style="{StaticResource LabelStyle}"/>
                                        <TextBox Text="{Binding RebuyAmount, UpdateSourceTrigger=PropertyChanged}" 
                                 Style="{StaticResource TextBoxStyle}"/>

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="15"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <StackPanel Grid.Column="0">
                                                <TextBlock Text="Max recaves/joueur" Style="{StaticResource LabelStyle}"/>
                                                <TextBox Text="{Binding MaxRebuysPerPlayer, UpdateSourceTrigger=PropertyChanged}" 
                                         Style="{StaticResource TextBoxStyle}"
                                         ToolTip="0 = illimit√©"/>
                                            </StackPanel>

                                            <StackPanel Grid.Column="2">
                                                <TextBlock Text="Niveau max recave" Style="{StaticResource LabelStyle}"/>
                                                <TextBox Text="{Binding RebuyMaxLevel, UpdateSourceTrigger=PropertyChanged}" 
                                         Style="{StaticResource TextBoxStyle}"
                                         ToolTip="0 = illimit√©"/>
                                            </StackPanel>
                                        </Grid>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                        </StackPanel>

                    </Grid>
                </ScrollViewer>



                <!-- √âTAPE 2 : Inscription joueurs -->
            <Grid>
                <Grid.Style>
                    <Style TargetType="Grid">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding CurrentStep}" Value="2">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Style>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Joueurs disponibles -->
                <Border Grid.Column="0" Style="{StaticResource CardStyle}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Text="üë• Joueurs disponibles" FontSize="18" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                        <TextBox Grid.Row="1"
         Text="{Binding PlayerSearchText, UpdateSourceTrigger=PropertyChanged}"
         Style="{StaticResource TextBoxStyle}"
         Margin="0,0,0,10"
         Height="40"
         Padding="32,0,10,0"
         VerticalContentAlignment="Center"
         FontSize="14"
         Foreground="White">
                            <TextBox.Template>
                                <ControlTemplate TargetType="TextBox">
                                    <Border x:Name="Bd"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="8">
                                        <Grid>
                                            <TextBlock Text="üîç"
                               FontSize="16"
                               Foreground="#a0a0a0"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Left"
                               Margin="10,0,0,0"
                               IsHitTestVisible="False"/>
                                            <ScrollViewer x:Name="PART_ContentHost"
                                  Margin="32,0,10,0"
                                  VerticalAlignment="Center"/>
                                            <TextBlock Text="Rechercher un joueur..."
                               FontSize="14"
                               Foreground="#a0a0a0"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Left"
                               Margin="32,0,0,0"
                               IsHitTestVisible="False"
                               Visibility="{Binding Text, RelativeSource={RelativeSource TemplatedParent}, 
                                            Converter={StaticResource StringToVisibilityConverter}, 
                                            ConverterParameter=Inverse}"/>
                                        </Grid>
                                    </Border>
                                </ControlTemplate>
                            </TextBox.Template>
                        </TextBox>

                        <!-- Barre de s√©lection -->
                        <Border Grid.Row="2" Background="#0f3460" CornerRadius="8" Padding="12,8" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <CheckBox Grid.Column="0"
                             Content="Tout s√©lectionner"
                             IsChecked="{Binding SelectAllAvailable}"
                             Foreground="White"
                             FontSize="13"
                             VerticalAlignment="Center"/>

                                <TextBlock Grid.Column="1"
                              VerticalAlignment="Center"
                              HorizontalAlignment="Center">
                        <Run Text="{Binding SelectedAvailableCount}" Foreground="#00ff88" FontWeight="Bold"/>
                        <Run Text=" s√©lectionn√©(s)" Foreground="#a0a0a0"/>
                                </TextBlock>

                                <Button Grid.Column="2"
                           Content="Effacer"
                           Command="{Binding ClearAvailableSelectionCommand}"
                           Height="28"
                           Padding="12,0"
                           Background="#2a2a3e"
                           Foreground="#a0a0a0"
                           BorderThickness="0"
                           FontSize="12"
                           Visibility="{Binding HasAvailableSelection, Converter={StaticResource BoolToVisibilityConverter}}"/>
                            </Grid>
                        </Border>

                        <ListBox Grid.Row="3"
                    ItemsSource="{Binding AvailablePlayers}"
                    Style="{StaticResource PlayerListStyle}"
                    SelectionMode="Extended">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <CheckBox Grid.Column="0"
                                     IsChecked="{Binding IsSelected}"
                                     VerticalAlignment="Center"
                                     Margin="0,0,12,0"/>

                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="{Binding Name}" FontWeight="Bold"/>
                                            <TextBlock Text="{Binding Nickname, StringFormat='@{0}'}" 
                                          FontSize="12" Foreground="#a0a0a0"
                                          Visibility="{Binding Nickname, Converter={StaticResource NullToCollapsedConverter}}"/>
                                        </StackPanel>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                        <StackPanel Grid.Row="4" Margin="0,10,0,0">
                            <Button Content="‚ûï Inscrire la s√©lection"
                       Command="{Binding RegisterSelectedPlayersCommand}"
                       Height="40"
                       Background="#00ff88"
                       Foreground="#1a1a2e"
                       FontSize="14"
                       FontWeight="Bold"
                       Margin="0,0,0,5"
                       Visibility="{Binding HasAvailableSelection, Converter={StaticResource BoolToVisibilityConverter}}"/>

                            <Button Content="Inscrire tous ‚è©"
                       Command="{Binding RegisterAllPlayersCommand}"
                       Height="40"
                       Background="#0f3460"
                       Foreground="White"
                       FontSize="14"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Boutons de transfert -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10">
                    <Border Background="#16213e" CornerRadius="10" Padding="8">
                        <StackPanel>
                            <TextBlock Text="üîÑ‚Äã" FontSize="20" HorizontalAlignment="Center" Margin="0,0,0,10"/>

                            <Button Content="‚Üí" 
                       Command="{Binding RegisterSelectedPlayersCommand}"
                       ToolTip="Inscrire la s√©lection"
                       Width="50" Height="50"
                       Background="#00ff88"
                       Foreground="#1a1a2e"
                       FontSize="24"
                       FontWeight="Bold"
                       Margin="0,5"
                       IsEnabled="{Binding HasAvailableSelection}"/>

                            <Button Content="‚Üê" 
                       Command="{Binding UnregisterSelectedPlayersCommand}"
                       ToolTip="D√©sinscrire la s√©lection"
                       Width="50" Height="50"
                       Background="#e94560"
                       Foreground="White"
                       FontSize="24"
                       FontWeight="Bold"
                       Margin="0,5"
                       IsEnabled="{Binding HasRegisteredSelection}"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Joueurs inscrits -->
                <Border Grid.Column="2" Style="{StaticResource CardStyle}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Text="‚úÖ Joueurs inscrits : " FontSize="18" FontWeight="Bold" Foreground="White"/>
                            <TextBlock Text="{Binding TotalPlayers}" FontSize="18" FontWeight="Bold" Foreground="#00ff88"/>
                        </StackPanel>

                        <!-- Barre de s√©lection inscrits -->
                        <Border Grid.Row="1" Background="#0f3460" CornerRadius="8" Padding="12,8" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <CheckBox Grid.Column="0"
                             Content="Tout s√©lectionner"
                             IsChecked="{Binding SelectAllRegistered}"
                             Foreground="White"
                             FontSize="13"
                             VerticalAlignment="Center"
                             Margin="0,0,15,0"/>

                                <TextBlock Grid.Column="1"
                              VerticalAlignment="Center"
                              HorizontalAlignment="Center">
                        <Run Text="{Binding SelectedRegisteredCount}" Foreground="#e94560" FontWeight="Bold"/>
                        <Run Text=" s√©lectionn√©(s)" Foreground="#a0a0a0"/>
                                </TextBlock>

                                <Button Grid.Column="2"
                           Content="Effacer"
                           Command="{Binding ClearRegisteredSelectionCommand}"
                           Height="28"
                           Padding="12,0"
                           Background="#2a2a3e"
                           Foreground="#a0a0a0"
                           BorderThickness="0"
                           FontSize="12"
                           Visibility="{Binding HasRegisteredSelection, Converter={StaticResource BoolToVisibilityConverter}}"/>
                            </Grid>
                        </Border>

                        <ListBox Grid.Row="2"
                    ItemsSource="{Binding RegisteredPlayers}"
                    Style="{StaticResource PlayerListStyle}"
                    SelectionMode="Extended">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <CheckBox Grid.Column="0"
                                     IsChecked="{Binding IsSelected}"
                                     VerticalAlignment="Center"
                                     Margin="0,0,12,0"/>

                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="{Binding Name}" FontWeight="Bold"/>
                                            <TextBlock Text="{Binding Nickname, StringFormat='@{0}'}" 
                                          FontSize="12" Foreground="#a0a0a0"
                                          Visibility="{Binding Nickname, Converter={StaticResource NullToCollapsedConverter}}"/>
                                        </StackPanel>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                        <StackPanel Grid.Row="3" Margin="0,10,0,0">
                            <Button Content="‚ûñ D√©sinscrire la s√©lection"
                       Command="{Binding UnregisterSelectedPlayersCommand}"
                       Height="40"
                       Background="#e94560"
                       Foreground="White"
                       FontSize="14"
                       FontWeight="Bold"
                       Margin="0,0,0,10"
                       Visibility="{Binding HasRegisteredSelection, Converter={StaticResource BoolToVisibilityConverter}}"/>

                            <Border Background="#0f3460" CornerRadius="10" Padding="15">
                                <StackPanel>
                                    <TextBlock Text="{Binding TotalPrizePool, StringFormat='Prize Pool estim√©: {0:C}'}" 
                                  FontSize="16" FontWeight="Bold" Foreground="#ffd700" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>

            <!-- √âTAPE 3 : Gestion des tables - VERSION FINALE SANS ERREURS -->
            <Grid>
                <Grid.Style>
                    <Style TargetType="Grid">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding CurrentStep}" Value="3">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Style>

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- HEADER AVEC ACTION PRINCIPALE -->
                <Border Grid.Row="0" Background="#0f3460" Padding="20,15">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Titre et statut compact -->
                        <StackPanel Grid.Column="0" VerticalAlignment="Center">
                            <TextBlock Text="üé≤ Gestion des tables" 
                           FontSize="22" 
                           FontWeight="Bold" 
                           Foreground="White"/>

                            <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                <Border Background="#1a3a52" CornerRadius="12" Padding="10,4" Margin="0,0,10,0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding TableCount}" 
                                       Foreground="#00ff88" 
                                       FontSize="14" 
                                       FontWeight="Bold"/>
                                        <TextBlock Text=" tables" 
                                       Foreground="#a0a0a0" 
                                       FontSize="14" 
                                       Margin="3,0,0,0"/>
                                    </StackPanel>
                                </Border>

                                <Border Background="#1a3a52" CornerRadius="12" Padding="10,4">
                                    <TextBlock FontSize="14" FontWeight="Bold">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Text" Value="‚ùå Joueurs non plac√©s"/>
                                                <Setter Property="Foreground" Value="#e94560"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding AllPlayersAssigned}" Value="True">
                                                        <Setter Property="Text" Value="‚úÖ Tous plac√©s"/>
                                                        <Setter Property="Foreground" Value="#00ff88"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Border>
                            </StackPanel>
                        </StackPanel>

                        <!-- BOUTON PRINCIPAL avec Border pour CornerRadius -->
                        <Border Grid.Column="1"
                    Background="#00ff88"
                    CornerRadius="8"
                    VerticalAlignment="Center">
                            <Border.Effect>
                                <DropShadowEffect Color="#00ff88" BlurRadius="15" ShadowDepth="0" Opacity="0.4"/>
                            </Border.Effect>

                            <Button Content="üéØ Placer automatiquement"
                        Command="{Binding AutoAssignPlayersCommand}"
                        Height="55"
                        MinWidth="240"
                        Background="Transparent"
                        Foreground="#1a1a2e"
                        FontSize="18"
                        FontWeight="Bold"
                        BorderThickness="0"/>
                        </Border>
                    </Grid>
                </Border>

                <!-- ZONE PRINCIPALE: PREVIEW DES TABLES avec ScrollViewer -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <!-- Le Padding est sur le Border, PAS sur le Grid -->
                    <Border Padding="20">
                        <StackPanel>

                            <!-- Info rapide drag & drop -->
                            <Border Background="#16213e" 
                        BorderBrush="#00ff88" 
                        BorderThickness="1" 
                        CornerRadius="8" 
                        Padding="12" 
                        Margin="0,0,0,20"
                        Opacity="0.8">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="üí°" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock TextWrapping="Wrap" Foreground="#a0a0a0" FontSize="13">
                            <Bold>Clic droit</Bold> sur un joueur pour le d√©placer ou verrouiller ‚Ä¢ 
                            <Bold>üîí Verrouill√©</Bold> = prot√©g√© de l'√©quilibrage auto
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <!-- GRILLE DES TABLES -->
                            <ItemsControl ItemsSource="{Binding TableLayouts}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel Orientation="Horizontal" HorizontalAlignment="Center"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <!-- Border avec Style conditionnel fusionn√© -->
                                        <Border Background="#16213e"
                                    CornerRadius="15"
                                    Padding="20"
                                    Margin="10"
                                    Width="340"
                                    BorderThickness="2">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Setter Property="BorderBrush" Value="Transparent"/>
                                                    <Style.Triggers>
                                                        <!-- Highlight si table d√©s√©quilibr√©e -->
                                                        <DataTrigger Binding="{Binding IsBalanced}" Value="False">
                                                            <Setter Property="BorderBrush" Value="#e94560"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>

                                            <StackPanel>
                                                <!-- Header table -->
                                                <Grid Background="#0f3460" Margin="-20,-20,-20,0">
                                                    <Border Padding="15,12">
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                            </Grid.ColumnDefinitions>

                                                            <TextBlock Grid.Column="0"
                                                           Text="{Binding TableNumber, StringFormat='TABLE {0}'}" 
                                                           FontSize="18" 
                                                           FontWeight="Bold" 
                                                           Foreground="#00ff88"
                                                           VerticalAlignment="Center"/>

                                                            <!-- Compteur joueurs -->
                                                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                                                <TextBlock Text="{Binding PlayerCount}" 
                                                               FontSize="24" 
                                                               FontWeight="Bold" 
                                                               Foreground="White"/>
                                                                <TextBlock Text="{Binding MaxSeats, StringFormat='/{0}'}" 
                                                               FontSize="16" 
                                                               Foreground="#a0a0a0"
                                                               VerticalAlignment="Center"
                                                               Margin="2,0,0,0"/>
                                                            </StackPanel>
                                                        </Grid>
                                                    </Border>
                                                </Grid>

                                                <!-- Si√®ges -->
                                                <ItemsControl ItemsSource="{Binding Seats}" Margin="0,12,0,0">
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border Background="#0f3460" 
                                                        CornerRadius="6" 
                                                        Padding="12,10" 
                                                        Margin="0,4"
                                                        MouseRightButtonUp="Seat_RightClick"
                                                        Tag="{Binding}">
                                                                <Border.Style>
                                                                    <Style TargetType="Border">
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding IsOccupied}" Value="True">
                                                                                <Setter Property="Background" Value="#1a3a52"/>
                                                                                <Setter Property="Cursor" Value="Hand"/>
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding IsLocked}" Value="True">
                                                                                <Setter Property="BorderBrush" Value="#ffd700"/>
                                                                                <Setter Property="BorderThickness" Value="2"/>
                                                                            </DataTrigger>
                                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                                <Setter Property="Background" Value="#2a4a62"/>
                                                                            </Trigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Border.Style>

                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="32"/>
                                                                        <ColumnDefinition Width="*"/>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                    </Grid.ColumnDefinitions>

                                                                    <TextBlock Grid.Column="0" 
                                                                   Text="{Binding SeatNumber, StringFormat='#{0}'}" 
                                                                   Foreground="#00ff88" 
                                                                   FontSize="12"
                                                                   FontWeight="Bold"
                                                                   VerticalAlignment="Center"/>

                                                                    <TextBlock Grid.Column="1" 
                                                                   Text="{Binding PlayerName}" 
                                                                   Foreground="White" 
                                                                   FontSize="14"
                                                                   FontWeight="SemiBold"
                                                                   VerticalAlignment="Center"
                                                                   Margin="8,0">
                                                                        <TextBlock.Style>
                                                                            <Style TargetType="TextBlock">
                                                                                <Style.Triggers>
                                                                                    <DataTrigger Binding="{Binding IsOccupied}" Value="False">
                                                                                        <Setter Property="Text" Value="‚Äî vide ‚Äî"/>
                                                                                        <Setter Property="FontStyle" Value="Italic"/>
                                                                                        <Setter Property="Foreground" Value="#404040"/>
                                                                                        <Setter Property="FontWeight" Value="Normal"/>
                                                                                    </DataTrigger>
                                                                                </Style.Triggers>
                                                                            </Style>
                                                                        </TextBlock.Style>
                                                                    </TextBlock>

                                                                    <TextBlock Grid.Column="2"
                                                                   Text="üîí"
                                                                   FontSize="13"
                                                                   VerticalAlignment="Center"
                                                                   Visibility="{Binding IsLocked, Converter={StaticResource BoolToVisConverter}}"/>
                                                                </Grid>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <!-- CONTR√îLES SECONDAIRES (REPLIABLE) -->
                            <Expander Header="‚öôÔ∏è Options avanc√©es" 
                          Margin="0,30,0,0"
                          Foreground="White"
                          FontSize="15"
                          FontWeight="SemiBold">
                                <Border Background="#16213e"
                            CornerRadius="15"
                            Padding="20"
                            Margin="10,10,10,0">
                                    <StackPanel>

                                        <!-- √âquilibrage -->
                                        <StackPanel Margin="0,0,0,15">
                                            <TextBlock Text="‚öñÔ∏è √âquilibrage des tables" 
                                           FontSize="15" 
                                           Foreground="White" 
                                           FontWeight="SemiBold"
                                           Margin="0,0,0,8"/>

                                            <Button Content="√âquilibrer maintenant"
                                        Command="{Binding BalanceTablesCommand}"
                                        Height="40"
                                        Background="#0f3460"
                                        Foreground="White"
                                        FontSize="14"
                                        FontWeight="SemiBold"
                                        HorizontalAlignment="Stretch"/>

                                            <TextBlock Text="Corrige les d√©s√©quilibres entre tables (respecte les joueurs verrouill√©s)" 
                                           FontSize="11" 
                                           Foreground="#808080"
                                           TextWrapping="Wrap"
                                           Margin="0,6,0,0"/>
                                        </StackPanel>

                                        <!-- Statut d√©taill√© -->
                                        <Border Background="#0f3460" 
                                    CornerRadius="6" 
                                    Padding="12"
                                    BorderBrush="#1a3a52"
                                    BorderThickness="1">
                                            <StackPanel>
                                                <TextBlock Text="üìä Statut d√©taill√©" 
                                               FontSize="14" 
                                               Foreground="White" 
                                               FontWeight="SemiBold"
                                               Margin="0,0,0,8"/>

                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>

                                                    <StackPanel Grid.Column="0">
                                                        <StackPanel Orientation="Horizontal" Margin="0,3">
                                                            <TextBlock Text="Tables actives : " Foreground="#a0a0a0" FontSize="13"/>
                                                            <TextBlock Text="{Binding TableCount}" Foreground="#00ff88" FontSize="13" FontWeight="Bold"/>
                                                        </StackPanel>

                                                        <StackPanel Orientation="Horizontal" Margin="0,3">
                                                            <TextBlock Text="√âtat : " Foreground="#a0a0a0" FontSize="13"/>
                                                            <TextBlock Text="{Binding BalanceStatus}" FontSize="13" FontWeight="Bold" Foreground="White"/>
                                                        </StackPanel>
                                                    </StackPanel>

                                                    <Button Grid.Column="1"
                                                Content="üîÑ"
                                                Command="{Binding RefreshTablesCommand}"
                                                Width="40" 
                                                Height="40"
                                                Background="#1a3a52"
                                                Foreground="White"
                                                FontSize="16"
                                                VerticalAlignment="Center"/>
                                                </Grid>
                                            </StackPanel>
                                        </Border>

                                    </StackPanel>
                                </Border>
                            </Expander>

                        </StackPanel>
                    </Border>
                </ScrollViewer>
            </Grid>



            <!-- √âTAPE 4 : R√©sum√© et lancement -->
            <Grid>
                <Grid.Style>
                    <Style TargetType="Grid">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding CurrentStep}" Value="4">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Style>

                <Border Style="{StaticResource CardStyle}" HorizontalAlignment="Center" VerticalAlignment="Center" MinWidth="500">
                    <StackPanel>
                        <TextBlock Text="üéØ R√©sum√© du tournoi" FontSize="24" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,30"/>

                        <Grid Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Nom:" Foreground="#a0a0a0" FontSize="16" Margin="0,5"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding TournamentName}" Foreground="White" FontSize="16" FontWeight="Bold" Margin="0,5"/>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Joueurs inscrits:" Foreground="#a0a0a0" FontSize="16" Margin="0,5"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding TotalPlayers}" Foreground="#00ff88" FontSize="16" FontWeight="Bold" Margin="0,5"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Buy-in:" Foreground="#a0a0a0" FontSize="16" Margin="0,5"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding BuyIn, StringFormat='{}{0:C}'}" Foreground="White" FontSize="16" FontWeight="Bold" Margin="0,5"/>

                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Prize Pool:" Foreground="#a0a0a0" FontSize="16" Margin="0,5"/>
                            <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding TotalPrizePool, StringFormat='{}{0:C}'}" Foreground="#ffd700" FontSize="16" FontWeight="Bold" Margin="0,5"/>
                        </Grid>

                        <Button Content="üöÄ D√âMARRER LE TOURNOI"
                               Command="{Binding StartTournamentCommand}"
                               Height="60"
                               Background="#00ff88"
                               Foreground="#1a1a2e"
                               FontSize="22"
                               FontWeight="Bold"
                               Margin="0,20,0,0"
                               IsEnabled="{Binding CanStartTournament}"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>

        <!-- FOOTER avec boutons navigation -->
        <Border Grid.Row="2" Background="#0f3460" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" 
                       Content="‚Üê Retour"
                       Command="{Binding PreviousStepCommand}"
                       HorizontalAlignment="Left"
                       Width="150" Height="45"
                       Background="#e94560"
                       Foreground="White"
                       FontSize="16"
                       FontWeight="Bold"
                       Visibility="{Binding CurrentStep, Converter={StaticResource ZeroToCollapsedConverter}}"/>

                <Button Grid.Column="2" 
                       Content="Suivant ‚Üí"
                       Command="{Binding NextStepCommand}"
                       HorizontalAlignment="Right"
                       Width="150" Height="45"
                       Background="#00ff88"
                       Foreground="#1a1a2e"
                       FontSize="16"
                       FontWeight="Bold">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding CurrentStep}" Value="4">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </Border>
    </Grid>
</Window>
